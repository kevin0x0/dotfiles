@hooks [
  {
    func load
    files [
      {
        @func concat
        strings [
          {
            @func getenv
            vars [
              XDG_CONFIG_HOME
            ]
            default "~/.config"
          }
          "/alsa/asoundrc.extra"
        ]
      }
    ]
    errors false
  }
]

# allow other users
defaults.pcm.ipc_perm 0666

defaults.pcm.dmix {
  !card {
    @func getenv
    vars [
      ALSA_PCM_CARD
      ALSA_CARD
    ]
    default {
      @func refer
      name defaults.pcm.card
    }
  }
  !device {
    @func igetenv
    vars [
      ALSA_PCM_DEVICE
    ]
    default {
      @func refer
      name defaults.pcm.device
    }
  }
}

pcm.playback {
	type plug
	slave.pcm "dmix"
}

pcm.capture {
	type plug
	slave.pcm "dsnoop"
}

pcm.general {
	type asym
	playback.pcm "playback"
	capture.pcm "capture"
}

pcm.!default {
  @func getenv
  vars [
    ALSA_PCM
  ]
  default "general"
}

# vim: ft=alsaconf
