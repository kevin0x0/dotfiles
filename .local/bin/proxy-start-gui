#!/bin/sh

SUDO_ASKPASS=$(command -v riced-menu-askpass) proxy-start --askpass
exitcode=$?

summary=
body=
urgency=

if [ $LANG = "zh_CN.UTF-8" ]; then
  case "$exitcode" in
    0)
      summary="成功"
      body="proxy 已启动"
      urgency=normal
      ;;
    64)
      summary="失败"
      body="已有proxy实例在运行"
      urgency=critical
      ;;
    *)
      summary="失败"
      body="proxy 未启动"
      urgency=critical
      ;;
  esac
else
  case "$exitcode" in
    0)
      summary="Success"
      body="Proxy is started"
      urgency=normal
      ;;
    64)
      summary="Failure"
      body="An instance of proxy is already running."
      urgency=critical
      ;;
    *)
      summary="Failure"
      body="Proxy is not started"
      urgency=critical
      ;;
  esac
fi

notify-send --app-name "proxy-start-gui" --urgency="$urgency" -- "$summary" "$body"
